{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Haneep CR/Downloads/vscode/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Haneep CR/Downloads/vscode/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/Haneep CR/Downloads/vscode/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Haneep CR/Downloads/vscode/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Haneep CR/Downloads/vscode/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import axios from'axios';import{Link,useHistory}from\"react-router-dom\";import{data,id,users}from\"jquery\";import validator from\"validator\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddUser=function AddUser(){var history=useHistory();var _useState=useState({firstName:\"\",lastName:\"\",email:\"\",city:\"\",pincode:\"\",phone:\"\",description:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),match=_useState4[0],setMatch=_useState4[1];var firstName=user.firstName,lastName=user.lastName,email=user.email,city=user.city,pincode=user.pincode,phone=user.phone,description=user.description;var onInputChange=function onInputChange(e){setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));};var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),emailError=_useState6[0],setEmailError=_useState6[1];var onSubmitUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var matching,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// validator.isEmail(value)\nmatching=false;_context.next=4;return axios.get(\"http://localhost:3004/users\");case 4:result=_context.sent;result.data.map(function(users){if(users.email==user.email){// const validateEmail = (e) => {\n//     var email = e.target.value\n//     if (validator.isEmail(email)) {\n//         setEmailError('Valid Email :)')\n//     } else {\n//         setEmailError('Enter valid Email!')\n//     }\n// }\nsetMatch(true);matching=true;}});if(matching){_context.next=10;break;}_context.next=9;return axios.post(\"http://localhost:3004/users\",user);case 9:history.push(\"/\");case 10:case\"end\":return _context.stop();}}},_callee);}));return function onSubmitUser(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-dark float-left mt-4\",to:\"/\",children:\"Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-75 mx-auto shadow p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Add A User\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return onSubmitUser(e);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{minLength:\"3\",maxLength:\"15\",pattern:\"[a-z, A-Z]+\",type:\"firstName\",className:\"form-control form-control-lg\",placeholder:\"Enter Your First Name\",name:\"firstName\",value:firstName,onChange:function onChange(e){return onInputChange(e);},required:true})}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',color:'red'},className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{minLength:\"1\",maxLength:\"10\",pattern:\"[a-z, A-Z]+\",type:\"lastName\",className:\"form-control form-control-lg\",placeholder:\"Enter Your Last Name\",name:\"lastName\",value:lastName,onChange:function onChange(e){return onInputChange(e);},required:true})}),/*#__PURE__*/_jsxs(\"div\",{className:\" form-group \",children:[/*#__PURE__*/_jsx(\"div\",{class:\"alert alert-warning\",role:\"alert\",style:{color:\"red\",display:match?\"block\":\"none\"},children:\"Email is already present\"}),/*#__PURE__*/_jsx(\"input\",{pattern:\"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,}$\",type:\"email\",className:\"form-control form-control-lg\",placeholder:\"Enter Your Email\",name:\"email\",value:email,onChange:function onChange(e){return onInputChange(e);},required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{pattern:\"[a-z, A-Z]+\",type:\"test\",className:\"form-control form-control-lg\",placeholder:\"Enter Your City\",name:\"city\",value:city,onChange:function onChange(e){return onInputChange(e);},required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{minLength:\"6\",maxLength:\"6\",pattern:\"[0-9]+\",type:\"pincode\",className:\"form-control form-control-lg\",placeholder:\"Enter Your Pincode\",name:\"pincode\",value:pincode,onChange:function onChange(e){return onInputChange(e);},required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{minLength:\"10\",maxLength:\"10\",pattern:\"[0-9]+\",type:\"phone\",className:\"form-control form-control-lg\",placeholder:\"Enter Your Phone Number\",name:\"phone\",value:phone,onChange:function onChange(e){return onInputChange(e);},required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{minLength:\"6\",maxLength:\"15\",type:\"description\",className:\"form-control form-control-lg\",placeholder:\"Enter Description\",name:\"description\",value:description,onChange:function onChange(e){return onInputChange(e);},required:true})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-block\",children:\"Add User\"})]})]})]});};export default AddUser;","map":{"version":3,"sources":["C:/Users/Haneep CR/Downloads/vscode/demo2/src/components/users/AddUser.js"],"names":["React","useState","axios","Link","useHistory","data","id","users","validator","AddUser","history","firstName","lastName","email","city","pincode","phone","description","user","setUser","match","setMatch","onInputChange","e","target","name","value","emailError","setEmailError","onSubmitUser","preventDefault","matching","get","result","map","post","push","fontWeight","color","display"],"mappings":"8xBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,IAAT,CAAeC,EAAf,CAAmBC,KAAnB,KAAgC,QAAhC,CACA,MAAOC,CAAAA,SAAP,KAAsB,WAAtB,C,wFAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAClB,GAAIC,CAAAA,OAAO,CAAGN,UAAU,EAAxB,CADkB,cAEMH,QAAQ,CAAC,CAC7BU,SAAS,CAAE,EADkB,CAE7BC,QAAQ,CAAE,EAFmB,CAG7BC,KAAK,CAAE,EAHsB,CAI7BC,IAAI,CAAE,EAJuB,CAK7BC,OAAO,CAAE,EALoB,CAM7BC,KAAK,CAAE,EANsB,CAO7BC,WAAW,CAAE,EAPgB,CAAD,CAFd,wCAEXC,IAFW,eAELC,OAFK,8BAWQlB,QAAQ,CAAC,KAAD,CAXhB,yCAWXmB,KAXW,eAWJC,QAXI,kBAYVV,CAAAA,SAZU,CAYwDO,IAZxD,CAYVP,SAZU,CAYCC,QAZD,CAYwDM,IAZxD,CAYCN,QAZD,CAYWC,KAZX,CAYwDK,IAZxD,CAYWL,KAZX,CAYkBC,IAZlB,CAYwDI,IAZxD,CAYkBJ,IAZlB,CAYwBC,OAZxB,CAYwDG,IAZxD,CAYwBH,OAZxB,CAYiCC,KAZjC,CAYwDE,IAZxD,CAYiCF,KAZjC,CAYwCC,WAZxC,CAYwDC,IAZxD,CAYwCD,WAZxC,CAalB,GAAMK,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,CAAC,CAAI,CACvBJ,OAAO,gCAAMD,IAAN,wBAAaK,CAAC,CAACC,MAAF,CAASC,IAAtB,CAA6BF,CAAC,CAACC,MAAF,CAASE,KAAtC,GAAP,CACH,CAFD,CAbkB,eAgBkBzB,QAAQ,CAAC,EAAD,CAhB1B,yCAgBX0B,UAhBW,eAgBCC,aAhBD,eAsBlB,GAAMC,CAAAA,YAAY,0FAAG,iBAAMN,CAAN,sIACjBA,CAAC,CAACO,cAAF,GAEA;AAIIC,QAPa,CAOF,KAPE,uBASI7B,CAAAA,KAAK,CAAC8B,GAAN,CAAU,6BAAV,CATJ,QASXC,MATW,eAWjBA,MAAM,CAAC5B,IAAP,CAAY6B,GAAZ,CAAgB,SAAC3B,KAAD,CAAW,CACvB,GAAIA,KAAK,CAACM,KAAN,EAAeK,IAAI,CAACL,KAAxB,CAA+B,CAK3B;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGAQ,QAAQ,CAAC,IAAD,CAAR,CACAU,QAAQ,CAAG,IAAX,CAEH,CAEJ,CAtBD,EAXiB,GAmCZA,QAnCY,gDAqCP7B,CAAAA,KAAK,CAACiC,IAAN,CAAW,6BAAX,CAA0CjB,IAA1C,CArCO,QAsCbR,OAAO,CAAC0B,IAAR,CAAa,GAAb,EAtCa,uDAAH,kBAAZP,CAAAA,YAAY,4CAAlB,CA+CA,mBACI,aAAK,SAAS,CAAC,WAAf,wBACI,KAAC,IAAD,EAAM,SAAS,CAAC,8BAAhB,CAA+C,EAAE,CAAC,GAAlD,kBADJ,cAKI,aAAK,SAAS,CAAC,yBAAf,wBACI,WAAI,SAAS,CAAC,kBAAd,wBADJ,cAEI,cAAM,QAAQ,CAAE,kBAAAN,CAAC,QAAIM,CAAAA,YAAY,CAACN,CAAD,CAAhB,EAAjB,wBACI,YAAK,SAAS,CAAC,YAAf,uBAEI,cACI,SAAS,CAAC,GADd,CAEI,SAAS,CAAC,IAFd,CAGI,OAAO,CAAC,aAHZ,CAII,IAAI,CAAC,WAJT,CAKI,SAAS,CAAC,8BALd,CAMI,WAAW,CAAC,uBANhB,CAOI,IAAI,CAAC,WAPT,CAQI,KAAK,CAAEZ,SARX,CASI,QAAQ,CAAE,kBAAAY,CAAC,QAAID,CAAAA,aAAa,CAACC,CAAD,CAAjB,EATf,CAUI,QAAQ,KAVZ,EAFJ,EADJ,cAgBI,YAAK,KAAK,CAAE,CACRc,UAAU,CAAE,MADJ,CAERC,KAAK,CAAE,KAFC,CAAZ,CAGG,SAAS,CAAC,YAHb,uBAII,cACI,SAAS,CAAC,GADd,CAEI,SAAS,CAAC,IAFd,CAGI,OAAO,CAAC,aAHZ,CAKI,IAAI,CAAC,UALT,CAMI,SAAS,CAAC,8BANd,CAOI,WAAW,CAAC,sBAPhB,CAQI,IAAI,CAAC,UART,CASI,KAAK,CAAE1B,QATX,CAUI,QAAQ,CAAE,kBAAAW,CAAC,QAAID,CAAAA,aAAa,CAACC,CAAD,CAAjB,EAVf,CAWI,QAAQ,KAXZ,EAJJ,EAhBJ,cAkCI,aAAK,SAAS,CAAC,cAAf,wBACI,YAAK,KAAK,CAAC,qBAAX,CAAiC,IAAI,CAAC,OAAtC,CAA8C,KAAK,CAAE,CAAEe,KAAK,CAAE,KAAT,CAAgBC,OAAO,CAAEnB,KAAK,CAAG,OAAH,CAAa,MAA3C,CAArD,sCADJ,cAEI,cACI,OAAO,CAAC,yCADZ,CAEI,IAAI,CAAC,OAFT,CAGI,SAAS,CAAC,8BAHd,CAII,WAAW,CAAC,kBAJhB,CAKI,IAAI,CAAC,OALT,CAMI,KAAK,CAAEP,KANX,CAOI,QAAQ,CAAE,kBAAAU,CAAC,QAAID,CAAAA,aAAa,CAACC,CAAD,CAAjB,EAPf,CAQI,QAAQ,KARZ,EAFJ,GAlCJ,cA+CI,YAAK,SAAS,CAAC,YAAf,uBACI,cACI,OAAO,CAAC,aADZ,CAEI,IAAI,CAAC,MAFT,CAGI,SAAS,CAAC,8BAHd,CAII,WAAW,CAAC,iBAJhB,CAKI,IAAI,CAAC,MALT,CAMI,KAAK,CAAET,IANX,CAOI,QAAQ,CAAE,kBAAAS,CAAC,QAAID,CAAAA,aAAa,CAACC,CAAD,CAAjB,EAPf,CAQI,QAAQ,KARZ,EADJ,EA/CJ,cA2DI,YAAK,SAAS,CAAC,YAAf,uBACI,cACI,SAAS,CAAC,GADd,CAEI,SAAS,CAAC,GAFd,CAGI,OAAO,CAAC,QAHZ,CAII,IAAI,CAAC,SAJT,CAKI,SAAS,CAAC,8BALd,CAMI,WAAW,CAAC,oBANhB,CAOI,IAAI,CAAC,SAPT,CAQI,KAAK,CAAER,OARX,CASI,QAAQ,CAAE,kBAAAQ,CAAC,QAAID,CAAAA,aAAa,CAACC,CAAD,CAAjB,EATf,CAUI,QAAQ,KAVZ,EADJ,EA3DJ,cAyEI,YAAK,SAAS,CAAC,YAAf,uBACI,cACI,SAAS,CAAC,IADd,CAEI,SAAS,CAAC,IAFd,CAGI,OAAO,CAAC,QAHZ,CAII,IAAI,CAAC,OAJT,CAKI,SAAS,CAAC,8BALd,CAMI,WAAW,CAAC,yBANhB,CAOI,IAAI,CAAC,OAPT,CAQI,KAAK,CAAEP,KARX,CASI,QAAQ,CAAE,kBAAAO,CAAC,QAAID,CAAAA,aAAa,CAACC,CAAD,CAAjB,EATf,CAUI,QAAQ,KAVZ,EADJ,EAzEJ,cAuFI,YAAK,SAAS,CAAC,YAAf,uBAEI,cACI,SAAS,CAAC,GADd,CAEI,SAAS,CAAC,IAFd,CAGI,IAAI,CAAC,aAHT,CAII,SAAS,CAAC,8BAJd,CAKI,WAAW,CAAC,mBALhB,CAMI,IAAI,CAAC,aANT,CAOI,KAAK,CAAEN,WAPX,CAQI,QAAQ,CAAE,kBAAAM,CAAC,QAAID,CAAAA,aAAa,CAACC,CAAD,CAAjB,EARf,CASI,QAAQ,KATZ,EAFJ,EAvFJ,cAuGI,eAAQ,SAAS,CAAC,2BAAlB,sBAvGJ,GAFJ,GALJ,GADJ,CAoHH,CAzLD,CA4LA,cAAed,CAAAA,OAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from 'axios'\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { data, id, users } from \"jquery\";\r\nimport validator from \"validator\";\r\n\r\nconst AddUser = () => {\r\n    let history = useHistory();\r\n    const [user, setUser] = useState({\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        email: \"\",\r\n        city: \"\",\r\n        pincode: \"\",\r\n        phone: \"\",\r\n        description: \"\"\r\n    });\r\n    const [match, setMatch] = useState(false)\r\n    const { firstName, lastName, email, city, pincode, phone, description } = user;\r\n    const onInputChange = e => {\r\n        setUser({ ...user, [e.target.name]: e.target.value });\r\n    };\r\n    const [emailError, setEmailError] = useState('');\r\n\r\n\r\n\r\n\r\n\r\n    const onSubmitUser = async e => {\r\n        e.preventDefault();\r\n\r\n        // validator.isEmail(value)\r\n\r\n\r\n\r\n        let matching = false\r\n\r\n        const result = await axios.get(\"http://localhost:3004/users\");\r\n\r\n        result.data.map((users) => {\r\n            if (users.email == user.email) {\r\n\r\n\r\n\r\n\r\n                // const validateEmail = (e) => {\r\n                //     var email = e.target.value\r\n\r\n                //     if (validator.isEmail(email)) {\r\n                //         setEmailError('Valid Email :)')\r\n                //     } else {\r\n                //         setEmailError('Enter valid Email!')\r\n                //     }\r\n                // }\r\n\r\n\r\n                setMatch(true)\r\n                matching = true\r\n\r\n            }\r\n\r\n        })\r\n\r\n        if (!matching) {\r\n\r\n            await axios.post(\"http://localhost:3004/users\", user);\r\n            history.push(\"/\");\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <Link className=\"btn btn-dark float-left mt-4\" to=\"/\">\r\n                Back\r\n      </Link>\r\n\r\n            <div className=\"w-75 mx-auto shadow p-5\">\r\n                <h2 className=\"text-center mb-4\">Add A User</h2>\r\n                <form onSubmit={e => onSubmitUser(e)}  >\r\n                    <div className=\"form-group\"   >\r\n\r\n                        <input\r\n                            minLength=\"3\"\r\n                            maxLength=\"15\"\r\n                            pattern=\"[a-z, A-Z]+\"\r\n                            type=\"firstName\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your First Name\"\r\n                            name=\"firstName\"\r\n                            value={firstName}\r\n                            onChange={e => onInputChange(e)}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div style={{\r\n                        fontWeight: 'bold',\r\n                        color: 'red',\r\n                    }} className=\"form-group\">\r\n                        <input\r\n                            minLength=\"1\"\r\n                            maxLength=\"10\"\r\n                            pattern=\"[a-z, A-Z]+\"\r\n\r\n                            type=\"lastName\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your Last Name\"\r\n                            name=\"lastName\"\r\n                            value={lastName}\r\n                            onChange={e => onInputChange(e)}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\" form-group \">\r\n                        <div class=\"alert alert-warning\" role=\"alert\" style={{ color: \"red\", display: match ? \"block\" : \"none\" }}>Email is already present</div>\r\n                        <input\r\n                            pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$\"\r\n                            type=\"email\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your Email\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            onChange={e => onInputChange(e)}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            pattern=\"[a-z, A-Z]+\"\r\n                            type=\"test\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your City\"\r\n                            name=\"city\"\r\n                            value={city}\r\n                            onChange={e => onInputChange(e)}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            minLength=\"6\"\r\n                            maxLength=\"6\"\r\n                            pattern=\"[0-9]+\"\r\n                            type=\"pincode\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your Pincode\"\r\n                            name=\"pincode\"\r\n                            value={pincode}\r\n                            onChange={e => onInputChange(e)}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            minLength=\"10\"\r\n                            maxLength=\"10\"\r\n                            pattern=\"[0-9]+\"\r\n                            type=\"phone\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your Phone Number\"\r\n                            name=\"phone\"\r\n                            value={phone}\r\n                            onChange={e => onInputChange(e)}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n\r\n                        <input\r\n                            minLength=\"6\"\r\n                            maxLength=\"15\"\r\n                            type=\"description\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Description\"\r\n                            name=\"description\"\r\n                            value={description}\r\n                            onChange={e => onInputChange(e)}\r\n                            required\r\n                        />\r\n\r\n                    </div>\r\n\r\n                    <button className=\"btn btn-success btn-block\">Add User</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default AddUser;"]},"metadata":{},"sourceType":"module"}