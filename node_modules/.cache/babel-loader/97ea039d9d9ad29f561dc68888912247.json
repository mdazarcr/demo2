{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Haneep CR/Downloads/vscode/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Haneep CR/Downloads/vscode/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/Haneep CR/Downloads/vscode/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Haneep CR/Downloads/vscode/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Haneep CR/Downloads/vscode/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Link,useHistory,useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditUser=function EditUser(){var history=useHistory();var _useParams=useParams(),id=_useParams.id;var _useState=useState({firstName:\"\",lastName:\"\",email:\"\",phone:\"\",city:\"\",pincode:\"\",description:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var firstName=user.firstName,lastName=user.lastName,email=user.email,city=user.city,pincode=user.pincode,phone=user.phone,description=user.description;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),match=_useState4[0],setMatch=_useState4[1];var onInputChange=function onInputChange(e){setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));};useEffect(function(){loadUser();},[]);var _onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var matching,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();matching=false;_context.next=4;return axios.get(\"http://localhost:3004/users\");case 4:result=_context.sent;result.data.map(function(users){if(users.email==user.email){setMatch(true);matching=true;}});if(matching){_context.next=10;break;}_context.next=9;return axios.put(\"http://localhost:3004/users/\".concat(id),user);case 9:history.push(\"/\");case 10:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var loadUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"http://localhost:3004/users/\".concat(id));case 2:result=_context2.sent;setUser(result.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function loadUser(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-dark float-left mt-4 \",to:\"/\",children:\"Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-75 mx-auto shadow p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Edit A User\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return _onSubmit(e);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{minLength:\"3\",maxLength:\"15\",pattern:\"[a-z, A-Z]+\",type:\"firstName\",className:\"form-control form-control-lg\",placeholder:\"Enter Your First Name\",name:\"firstName\",value:firstName,onChange:function onChange(e){return onInputChange(e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{minLength:\"1\",maxLength:\"10\",pattern:\"[a-z, A-Z]+\",type:\"lastName\",className:\"form-control form-control-lg\",placeholder:\"Enter Your Last Name\",name:\"lastName\",value:lastName,onChange:function onChange(e){return onInputChange(e);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"alert alert-warning\",role:\"alert\",style:{color:\"red\",display:match?\"block\":\"none\"},children:\"Email is already present\"}),/*#__PURE__*/_jsx(\"input\",{pattern:\"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,}$\",type:\"email\",className:\"form-control form-control-lg\",placeholder:\"Enter Your E-mail Address\",name:\"email\",value:email,onChange:function onChange(e){return onInputChange(e);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{pattern:\"[a-z, A-Z]+\",type:\"city\",className:\"form-control form-control-lg\",placeholder:\"Enter Your City\",name:\"city\",value:city,onChange:function onChange(e){return onInputChange(e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{pattern:\"[0-9]+\",minLength:\"6\",maxLength:\"6\",type:\"pincode\",className:\"form-control form-control-lg\",placeholder:\"Enter Your Pincode\",name:\"pincode\",value:pincode,onChange:function onChange(e){return onInputChange(e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{minLength:\"10\",maxLength:\"10\",pattern:\"[0-9]+\",type:\"phone\",className:\"form-control form-control-lg\",placeholder:\"Enter Your Phone Number\",name:\"phone\",value:phone,onChange:function onChange(e){return onInputChange(e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{minLength:\"6\",maxLength:\"15\",type:\"description\",className:\"form-control form-control-lg\",placeholder:\"Enter Description\",name:\"description\",value:description,onChange:function onChange(e){return onInputChange(e);}})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-block\",children:\"Update User\"})]})]})]});};export default EditUser;","map":{"version":3,"sources":["C:/Users/Haneep CR/Downloads/vscode/demo2/src/components/users/EditUser.js"],"names":["React","useState","useEffect","axios","Link","useHistory","useParams","EditUser","history","id","firstName","lastName","email","phone","city","pincode","description","user","setUser","match","setMatch","onInputChange","e","target","name","value","loadUser","onSubmit","preventDefault","matching","get","result","data","map","users","put","push","color","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link, useHistory, useParams } from \"react-router-dom\";\r\n\r\nconst EditUser = () => {\r\n    let history = useHistory();\r\n    const { id } = useParams();\r\n    const [user, setUser] = useState({\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        city: \"\",\r\n        pincode: \"\",\r\n        description: \"\"\r\n    });\r\n\r\n    const { firstName, lastName, email, city, pincode, phone, description } = user;\r\n    const [match, setMatch] = useState(false)\r\n\r\n    const onInputChange = e => {\r\n        setUser({ ...user, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadUser();\r\n    }, []);\r\n\r\n    const onSubmit = async e => {\r\n        e.preventDefault();\r\n        let matching = false\r\n        const result = await axios.get(\"http://localhost:3004/users\");\r\n        result.data.map((users) => {\r\n            if (users.email == user.email) {\r\n                setMatch(true)\r\n                matching = true\r\n            }\r\n        })\r\n\r\n        if (!matching) {\r\n            await axios.put(`http://localhost:3004/users/${id}`, user);\r\n            history.push(\"/\");\r\n        }\r\n\r\n    };\r\n\r\n    const loadUser = async () => {\r\n        const result = await axios.get(`http://localhost:3004/users/${id}`);\r\n        setUser(result.data);\r\n    };\r\n\r\n    return (\r\n\r\n\r\n        <div className=\"container\">\r\n            <Link className=\"btn btn-dark float-left mt-4 \" to=\"/\">\r\n                Back\r\n      </Link>\r\n            <div className=\"w-75 mx-auto shadow p-5\">\r\n                <h2 className=\"text-center mb-4\">Edit A User</h2>\r\n                <form onSubmit={e => onSubmit(e)}>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            minLength=\"3\"\r\n                            maxLength=\"15\"\r\n                            pattern=\"[a-z, A-Z]+\"\r\n                            type=\"firstName\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your First Name\"\r\n                            name=\"firstName\"\r\n                            value={firstName}\r\n                            onChange={e => onInputChange(e)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            minLength=\"1\"\r\n                            maxLength=\"10\"\r\n                            pattern=\"[a-z, A-Z]+\"\r\n                            type=\"lastName\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your Last Name\"\r\n                            name=\"lastName\"\r\n                            value={lastName}\r\n                            onChange={e => onInputChange(e)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <div class=\"alert alert-warning\" role=\"alert\" style={{ color: \"red\", display: match ? \"block\" : \"none\" }}>Email is already present</div>\r\n                        <input\r\n                            pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$\"\r\n                            type=\"email\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your E-mail Address\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            onChange={e => onInputChange(e)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            pattern=\"[a-z, A-Z]+\"\r\n                            type=\"city\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your City\"\r\n                            name=\"city\"\r\n                            value={city}\r\n                            onChange={e => onInputChange(e)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            pattern=\"[0-9]+\"\r\n                            minLength=\"6\"\r\n                            maxLength=\"6\"\r\n                            type=\"pincode\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your Pincode\"\r\n                            name=\"pincode\"\r\n                            value={pincode}\r\n                            onChange={e => onInputChange(e)}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            minLength=\"10\"\r\n                            maxLength=\"10\"\r\n                            pattern=\"[0-9]+\"\r\n                            type=\"phone\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Your Phone Number\"\r\n                            name=\"phone\"\r\n                            value={phone}\r\n                            onChange={e => onInputChange(e)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            minLength=\"6\"\r\n                            maxLength=\"15\"\r\n                            type=\"description\"\r\n                            className=\"form-control form-control-lg\"\r\n                            placeholder=\"Enter Description\"\r\n                            name=\"description\"\r\n                            value={description}\r\n                            onChange={e => onInputChange(e)}\r\n                        />\r\n                    </div>\r\n\r\n                    <button className=\"btn btn-success btn-block\">Update User</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EditUser;"]},"metadata":{},"sourceType":"module"}